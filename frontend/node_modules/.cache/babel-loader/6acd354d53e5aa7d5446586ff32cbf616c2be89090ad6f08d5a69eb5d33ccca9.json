{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\gvsux\\\\OneDrive\\\\Desktop\\\\Anangwe\\\\Budgeting-Bot\\\\frontend\\\\src\\\\components\\\\ChatWindow.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from \"react\";\nimport axios from \"axios\";\nimport botAvatar from \"../assets/bot.png\";\nimport userAvatar from \"../assets/user.png\";\nimport \"../styles.css\";\n\n// Step constants\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst STEPS = {\n  NAME: 0,\n  GOAL: 1,\n  INCOME_START: 2,\n  EXPENSE_START: 8,\n  // (income fields count + 2)\n  QNA: 16,\n  // (income + expense fields count + 2)\n  DOWNLOAD: 17 // one after QNA\n};\nconst incomeSources = [\"Job\", \"Side-hustle\", \"Family support\", \"Scholarships\", \"Reimbursements\", \"Tax refunds\"];\nconst expenseCategories = [\"Rent\", \"Groceries\", \"Utilities\", \"Transport\", \"Tuition\", \"Dining out\", \"Entertainment\", \"Other\"];\nexport default function ChatWindow() {\n  _s();\n  const [theme, setTheme] = useState(\"light\");\n  const [fontSize, setFontSize] = useState(1.0);\n  const [step, setStep] = useState(STEPS.NAME);\n  const [userState, setUserState] = useState({\n    name: \"\",\n    goal: \"\",\n    income: {},\n    expenses: {},\n    qna: \"\"\n  });\n  const [input, setInput] = useState(\"\");\n  const [qaInput, setQaInput] = useState(\"\");\n  const [qaResponse, setQaResponse] = useState(null);\n  const [spreadsheetUrl, setSpreadsheetUrl] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [messages, setMessages] = useState([{\n    from: \"bot\",\n    text: \"Hello, I am FinBot, your AI Budgeting Assistant.\\nGet ready to answer some questions.\\n What is your name?\"\n  }]);\n  const inputRef = useRef(null);\n  const chatEndRef = useRef(null);\n  useEffect(() => {\n    if (inputRef.current) inputRef.current.focus();\n  }, [step, loading, qaResponse]);\n  useEffect(() => {\n    if (chatEndRef.current) chatEndRef.current.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }, [messages, qaResponse, loading]);\n  const handleRestart = () => {\n    setMessages([{\n      from: \"bot\",\n      text: \"Hello, I am FinBot, your AI Budgeting Assistant.\\nGet ready to answer some questions.\\n What is your name?\"\n    }]);\n    setStep(STEPS.NAME);\n    setUserState({\n      name: \"\",\n      goal: \"\",\n      income: {},\n      expenses: {},\n      qna: \"\"\n    });\n    setInput(\"\");\n    setQaInput(\"\");\n    setQaResponse(null);\n    setSpreadsheetUrl(\"\");\n  };\n  const addMessage = (from, text) => {\n    setMessages(prev => [...prev, {\n      from,\n      text\n    }]);\n  };\n\n  // Stepper logic\n  const handleBudgetStepper = () => {\n    if (!input.trim()) return;\n    if (step === STEPS.NAME) {\n      addMessage(\"user\", input);\n      setUserState(s => ({\n        ...s,\n        name: input\n      }));\n      setInput(\"\");\n      setTimeout(() => {\n        addMessage(\"bot\", \"What is your main financial goal this month?\");\n        setStep(STEPS.GOAL);\n      }, 350);\n    } else if (step === STEPS.GOAL) {\n      addMessage(\"user\", input);\n      setUserState(s => ({\n        ...s,\n        goal: input\n      }));\n      setInput(\"\");\n      setTimeout(() => {\n        addMessage(\"bot\", `How much do you get monthly from your ${incomeSources[0]}?`);\n        setStep(STEPS.INCOME_START);\n      }, 350);\n    } else if (step >= STEPS.INCOME_START && step < STEPS.EXPENSE_START) {\n      const idx = step - STEPS.INCOME_START;\n      addMessage(\"user\", `$${input} from ${incomeSources[idx]}`);\n      setUserState(s => ({\n        ...s,\n        income: {\n          ...s.income,\n          [incomeSources[idx]]: Number(input)\n        }\n      }));\n      setInput(\"\");\n      if (idx + 1 < incomeSources.length) {\n        setTimeout(() => {\n          addMessage(\"bot\", `How much do you get monthly from your ${incomeSources[idx + 1]}?`);\n          setStep(step + 1);\n        }, 350);\n      } else {\n        setTimeout(() => {\n          addMessage(\"bot\", `How much do you spend monthly on ${expenseCategories[0]}?`);\n          setStep(STEPS.EXPENSE_START);\n        }, 350);\n      }\n    } else if (step >= STEPS.EXPENSE_START && step < STEPS.QNA) {\n      const idx = step - STEPS.EXPENSE_START;\n      addMessage(\"user\", `$${input} for ${expenseCategories[idx]}`);\n      setUserState(s => ({\n        ...s,\n        expenses: {\n          ...s.expenses,\n          [expenseCategories[idx]]: Number(input)\n        }\n      }));\n      setInput(\"\");\n      if (idx + 1 < expenseCategories.length) {\n        setTimeout(() => {\n          addMessage(\"bot\", `How much do you spend monthly on ${expenseCategories[idx + 1]}?`);\n          setStep(step + 1);\n        }, 350);\n      } else {\n        setTimeout(() => {\n          addMessage(\"bot\", \"All set! Now you can ask me any question about your income, spending or money management.\\n I'll give you actionable tips based on your info.\");\n          setStep(STEPS.QNA);\n        }, 350);\n      }\n    }\n  };\n\n  // Q&A logic\n  const QNA_STEP = 16; // Should match STEPS.QNA in your backend\n\n  const askQuestion = async () => {\n    setLoading(true);\n    addMessage(\"user\", qaInput);\n    try {\n      // Send the required shape: { step, user_state }\n      const res = await axios.post(\"http://localhost:8000/chat\", {\n        step: QNA_STEP,\n        user_state: {\n          name: userState.name,\n          goal: userState.goal,\n          income: userState.income,\n          expenses: userState.expenses,\n          qna: qaInput\n        }\n      });\n      setQaResponse(res.data.response);\n      addMessage(\"bot\", typeof res.data.response === \"string\" ? res.data.response : res.data.response.summary);\n      setQaInput(\"\");\n    } catch (error) {\n      setQaResponse(\"Sorry, could not get an answer.\");\n      addMessage(\"bot\", \"Sorry, could not get an answer.\");\n    }\n    setLoading(false);\n  };\n\n  // Download spreadsheet\n  const downloadSpreadsheet = async () => {\n    setLoading(true);\n    try {\n      const res = await axios.post(\"http://localhost:8000/export-budget\", userState, {\n        responseType: \"blob\"\n      });\n      const url = URL.createObjectURL(new Blob([res.data]));\n      setSpreadsheetUrl(url);\n      addMessage(\"bot\", \"Your budget spreadsheet is ready!\");\n    } catch (err) {\n      alert(\"Download failed.\");\n    }\n    setLoading(false);\n  };\n  const fontSizePct = Math.round(fontSize * 100);\n\n  // Chat rendering (with CSS Grid for avatars and bubbles)\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `chat-window-modern ${theme}`,\n    style: {\n      fontSize: `${fontSize}em`\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"theme-toggle-row\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        \"aria-label\": `Switch to ${theme === \"dark\" ? \"light\" : \"dark\"} mode`,\n        title: `Switch to ${theme === \"dark\" ? \"light\" : \"dark\"} mode`,\n        className: \"theme-toggle-btn\",\n        tabIndex: 0,\n        onClick: () => setTheme(theme === \"dark\" ? \"light\" : \"dark\"),\n        children: theme === \"dark\" ? \"Light\" : \"Dark\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        \"aria-label\": `Increase font size (current: ${fontSizePct}%)`,\n        className: \"font-size-btn\",\n        tabIndex: 0,\n        style: {\n          marginLeft: 8\n        },\n        onClick: () => setFontSize(f => Math.min(f + 0.15, 1.7)),\n        children: \"+\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        \"aria-label\": `Decrease font size (current: ${fontSizePct}%)`,\n        className: \"font-size-btn\",\n        tabIndex: 0,\n        style: {\n          marginLeft: 2\n        },\n        onClick: () => setFontSize(f => Math.max(f - 0.15, 0.7)),\n        children: \"-\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"restart-btn\",\n        tabIndex: 0,\n        \"aria-label\": \"Restart conversation\",\n        style: {\n          marginLeft: 16\n        },\n        onClick: handleRestart,\n        children: \"Restart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-scrollbox gradient-bg\",\n      children: [messages.map((msg, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `bubble-row ${msg.from === \"user\" ? \"right\" : \"left\"}`,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bubble-grid\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: msg.from === \"user\" ? userAvatar : botAvatar,\n            alt: msg.from === \"user\" ? \"User avatar\" : \"FinBot avatar\",\n            className: \"bubble-avatar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: msg.from === \"user\" ? \"user-bubble bubble-animate\" : \"bot-bubble bubble-animate\",\n            tabIndex: 0,\n            role: \"status\",\n            \"aria-live\": \"polite\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                flex: 1\n              },\n              children: msg.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 13\n        }, this)\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: chatEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }, this), (step === STEPS.NAME || step === STEPS.GOAL || step >= STEPS.INCOME_START && step < STEPS.EXPENSE_START || step >= STEPS.EXPENSE_START && step < STEPS.QNA) && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"input-row\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        ref: inputRef,\n        type: step >= STEPS.INCOME_START && step < STEPS.QNA ? \"number\" : \"text\",\n        value: input,\n        onChange: e => setInput(e.target.value),\n        onKeyDown: e => e.key === \"Enter\" && handleBudgetStepper(),\n        \"aria-label\": \"Your answer\",\n        style: {\n          flex: 1,\n          minWidth: 0\n        },\n        disabled: loading,\n        tabIndex: 0\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"bubble-action-btn\",\n        onClick: handleBudgetStepper,\n        disabled: loading || !input.trim(),\n        \"aria-label\": \"Send\",\n        tabIndex: 0,\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 9\n    }, this), step === STEPS.QNA && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bot-bubble bubble-animate\",\n      children: [!qaResponse && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"qna-input\",\n          children: \"Ask a question about your budget or money:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"qna-input\",\n          type: \"text\",\n          ref: inputRef,\n          value: qaInput,\n          onChange: e => setQaInput(e.target.value),\n          onKeyDown: e => e.key === \"Enter\" && askQuestion(),\n          \"aria-label\": \"Your budgeting question\",\n          style: {\n            marginTop: 6,\n            marginBottom: 10\n          },\n          disabled: loading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"bubble-action-btn\",\n          onClick: askQuestion,\n          disabled: loading || !qaInput.trim(),\n          children: loading ? \"Thinking...\" : \"Ask\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true), qaResponse && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: 10\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Answer:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 6,\n              marginBottom: 10\n            },\n            children: qaResponse\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            gap: 10\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"bubble-action-btn\",\n            onClick: () => {\n              setQaResponse(null);\n              setQaInput(\"\");\n            },\n            children: \"Ask another question\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"bubble-action-btn\",\n            onClick: () => setStep(STEPS.DOWNLOAD),\n            children: \"Finish & Download Budget Spreadsheet\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 9\n    }, this), step === STEPS.DOWNLOAD && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bot-bubble bubble-animate\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Download your budget template as a spreadsheet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"bubble-action-btn\",\n        onClick: downloadSpreadsheet,\n        disabled: loading,\n        children: \"Download\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 11\n      }, this), spreadsheetUrl && /*#__PURE__*/_jsxDEV(\"a\", {\n        href: spreadsheetUrl,\n        download: \"budget.xlsx\",\n        children: \"Click here if your download does not start.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 185,\n    columnNumber: 5\n  }, this);\n}\n_s(ChatWindow, \"ETto84KZ1t8a6DJkWqznYy6PsRA=\");\n_c = ChatWindow;\nvar _c;\n$RefreshReg$(_c, \"ChatWindow\");","map":{"version":3,"names":["React","useState","useRef","useEffect","axios","botAvatar","userAvatar","jsxDEV","_jsxDEV","Fragment","_Fragment","STEPS","NAME","GOAL","INCOME_START","EXPENSE_START","QNA","DOWNLOAD","incomeSources","expenseCategories","ChatWindow","_s","theme","setTheme","fontSize","setFontSize","step","setStep","userState","setUserState","name","goal","income","expenses","qna","input","setInput","qaInput","setQaInput","qaResponse","setQaResponse","spreadsheetUrl","setSpreadsheetUrl","loading","setLoading","messages","setMessages","from","text","inputRef","chatEndRef","current","focus","scrollIntoView","behavior","handleRestart","addMessage","prev","handleBudgetStepper","trim","s","setTimeout","idx","Number","length","QNA_STEP","askQuestion","res","post","user_state","data","response","summary","error","downloadSpreadsheet","responseType","url","URL","createObjectURL","Blob","err","alert","fontSizePct","Math","round","className","style","children","title","tabIndex","onClick","fileName","_jsxFileName","lineNumber","columnNumber","marginLeft","f","min","max","map","msg","i","src","alt","role","flex","ref","type","value","onChange","e","target","onKeyDown","key","minWidth","disabled","htmlFor","id","marginTop","marginBottom","display","gap","href","download","_c","$RefreshReg$"],"sources":["C:/Users/gvsux/OneDrive/Desktop/Anangwe/Budgeting-Bot/frontend/src/components/ChatWindow.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\nimport axios from \"axios\";\nimport botAvatar from \"../assets/bot.png\";\nimport userAvatar from \"../assets/user.png\";\nimport \"../styles.css\";\n\n// Step constants\nconst STEPS = {\n  NAME: 0,\n  GOAL: 1,\n  INCOME_START: 2,\n  EXPENSE_START: 8, // (income fields count + 2)\n  QNA: 16,          // (income + expense fields count + 2)\n  DOWNLOAD: 17      // one after QNA\n};\n\nconst incomeSources = [\n  \"Job\", \"Side-hustle\", \"Family support\", \"Scholarships\", \"Reimbursements\", \"Tax refunds\"\n];\nconst expenseCategories = [\n  \"Rent\", \"Groceries\", \"Utilities\", \"Transport\", \"Tuition\", \"Dining out\", \"Entertainment\", \"Other\"\n];\n\nexport default function ChatWindow() {\n  const [theme, setTheme] = useState(\"light\");\n  const [fontSize, setFontSize] = useState(1.0);\n  const [step, setStep] = useState(STEPS.NAME);\n  const [userState, setUserState] = useState({\n    name: \"\",\n    goal: \"\",\n    income: {},\n    expenses: {},\n    qna: \"\"\n  });\n  const [input, setInput] = useState(\"\");\n  const [qaInput, setQaInput] = useState(\"\");\n  const [qaResponse, setQaResponse] = useState(null);\n  const [spreadsheetUrl, setSpreadsheetUrl] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const [messages, setMessages] = useState([\n    { from: \"bot\", text: \"Hello, I am FinBot, your AI Budgeting Assistant.\\nGet ready to answer some questions.\\n What is your name?\" }\n  ]);\n  const inputRef = useRef(null);\n  const chatEndRef = useRef(null);\n\n  useEffect(() => {\n    if (inputRef.current) inputRef.current.focus();\n  }, [step, loading, qaResponse]);\n\n  useEffect(() => {\n    if (chatEndRef.current) chatEndRef.current.scrollIntoView({ behavior: \"smooth\" });\n  }, [messages, qaResponse, loading]);\n\n  const handleRestart = () => {\n    setMessages([\n      { from: \"bot\", text: \"Hello, I am FinBot, your AI Budgeting Assistant.\\nGet ready to answer some questions.\\n What is your name?\" }\n    ]);\n    setStep(STEPS.NAME);\n    setUserState({\n      name: \"\",\n      goal: \"\",\n      income: {},\n      expenses: {},\n      qna: \"\"\n    });\n    setInput(\"\");\n    setQaInput(\"\");\n    setQaResponse(null);\n    setSpreadsheetUrl(\"\");\n  };\n\n  const addMessage = (from, text) => {\n    setMessages(prev => [...prev, { from, text }]);\n  };\n\n  // Stepper logic\n  const handleBudgetStepper = () => {\n    if (!input.trim()) return;\n    if (step === STEPS.NAME) {\n      addMessage(\"user\", input);\n      setUserState(s => ({ ...s, name: input }));\n      setInput(\"\");\n      setTimeout(() => {\n        addMessage(\"bot\", \"What is your main financial goal this month?\");\n        setStep(STEPS.GOAL);\n      }, 350);\n    } else if (step === STEPS.GOAL) {\n      addMessage(\"user\", input);\n      setUserState(s => ({ ...s, goal: input }));\n      setInput(\"\");\n      setTimeout(() => {\n        addMessage(\"bot\", `How much do you get monthly from your ${incomeSources[0]}?`);\n        setStep(STEPS.INCOME_START);\n      }, 350);\n    } else if (step >= STEPS.INCOME_START && step < STEPS.EXPENSE_START) {\n      const idx = step - STEPS.INCOME_START;\n      addMessage(\"user\", `$${input} from ${incomeSources[idx]}`);\n      setUserState(s => ({\n        ...s,\n        income: { ...s.income, [incomeSources[idx]]: Number(input) }\n      }));\n      setInput(\"\");\n      if (idx + 1 < incomeSources.length) {\n        setTimeout(() => {\n          addMessage(\"bot\", `How much do you get monthly from your ${incomeSources[idx + 1]}?`);\n          setStep(step + 1);\n        }, 350);\n      } else {\n        setTimeout(() => {\n          addMessage(\"bot\", `How much do you spend monthly on ${expenseCategories[0]}?`);\n          setStep(STEPS.EXPENSE_START);\n        }, 350);\n      }\n    } else if (step >= STEPS.EXPENSE_START && step < STEPS.QNA) {\n      const idx = step - STEPS.EXPENSE_START;\n      addMessage(\"user\", `$${input} for ${expenseCategories[idx]}`);\n      setUserState(s => ({\n        ...s,\n        expenses: { ...s.expenses, [expenseCategories[idx]]: Number(input) }\n      }));\n      setInput(\"\");\n      if (idx + 1 < expenseCategories.length) {\n        setTimeout(() => {\n          addMessage(\"bot\", `How much do you spend monthly on ${expenseCategories[idx + 1]}?`);\n          setStep(step + 1);\n        }, 350);\n      } else {\n        setTimeout(() => {\n          addMessage(\"bot\", \"All set! Now you can ask me any question about your income, spending or money management.\\n I'll give you actionable tips based on your info.\");\n          setStep(STEPS.QNA);\n        }, 350);\n      }\n    }\n  };\n\n  // Q&A logic\n  const QNA_STEP = 16; // Should match STEPS.QNA in your backend\n\nconst askQuestion = async () => {\n  setLoading(true);\n  addMessage(\"user\", qaInput);\n\n  try {\n    // Send the required shape: { step, user_state }\n    const res = await axios.post(\"http://localhost:8000/chat\", {\n      step: QNA_STEP,\n      user_state: {\n        name: userState.name,\n        goal: userState.goal,\n        income: userState.income,\n        expenses: userState.expenses,\n        qna: qaInput\n      }\n    });\n\n    setQaResponse(res.data.response);\n    addMessage(\"bot\", typeof res.data.response === \"string\" ? res.data.response : res.data.response.summary);\n    setQaInput(\"\");\n  } catch (error) {\n    setQaResponse(\"Sorry, could not get an answer.\");\n    addMessage(\"bot\", \"Sorry, could not get an answer.\");\n  }\n  setLoading(false);\n};\n\n  // Download spreadsheet\n  const downloadSpreadsheet = async () => {\n    setLoading(true);\n    try {\n      const res = await axios.post(\"http://localhost:8000/export-budget\", userState, { responseType: \"blob\" });\n      const url = URL.createObjectURL(new Blob([res.data]));\n      setSpreadsheetUrl(url);\n      addMessage(\"bot\", \"Your budget spreadsheet is ready!\");\n    } catch (err) {\n      alert(\"Download failed.\");\n    }\n    setLoading(false);\n  };\n\n  const fontSizePct = Math.round(fontSize * 100);\n\n  // Chat rendering (with CSS Grid for avatars and bubbles)\n  return (\n    <div className={`chat-window-modern ${theme}`} style={{ fontSize: `${fontSize}em` }}>\n      <div className=\"theme-toggle-row\">\n        <button\n          aria-label={`Switch to ${theme === \"dark\" ? \"light\" : \"dark\"} mode`}\n          title={`Switch to ${theme === \"dark\" ? \"light\" : \"dark\"} mode`}\n          className=\"theme-toggle-btn\"\n          tabIndex={0}\n          onClick={() => setTheme(theme === \"dark\" ? \"light\" : \"dark\")}\n        >\n          {theme === \"dark\" ? \"Light\" : \"Dark\"}\n        </button>\n        <button\n          aria-label={`Increase font size (current: ${fontSizePct}%)`}\n          className=\"font-size-btn\"\n          tabIndex={0}\n          style={{ marginLeft: 8 }}\n          onClick={() => setFontSize(f => Math.min(f + 0.15, 1.7))}\n        >+</button>\n        <button\n          aria-label={`Decrease font size (current: ${fontSizePct}%)`}\n          className=\"font-size-btn\"\n          tabIndex={0}\n          style={{ marginLeft: 2 }}\n          onClick={() => setFontSize(f => Math.max(f - 0.15, 0.7))}\n        >-</button>\n        <button\n          className=\"restart-btn\"\n          tabIndex={0}\n          aria-label=\"Restart conversation\"\n          style={{ marginLeft: 16 }}\n          onClick={handleRestart}\n        >Restart</button>\n      </div>\n      <div className=\"chat-scrollbox gradient-bg\">\n        {messages.map((msg, i) => (\n          <div\n            key={i}\n            className={`bubble-row ${msg.from === \"user\" ? \"right\" : \"left\"}`}\n          >\n            <div className=\"bubble-grid\">\n              <img\n                src={msg.from === \"user\" ? userAvatar : botAvatar}\n                alt={msg.from === \"user\" ? \"User avatar\" : \"FinBot avatar\"}\n                className=\"bubble-avatar\"\n              />\n              <div\n                className={msg.from === \"user\" ? \"user-bubble bubble-animate\" : \"bot-bubble bubble-animate\"}\n                tabIndex={0}\n                role=\"status\"\n                aria-live=\"polite\"\n              >\n                <span style={{ flex: 1 }}>{msg.text}</span>\n              </div>\n            </div>\n          </div>\n        ))}\n        <div ref={chatEndRef} />\n      </div>\n\n      {/* === Stepper logic for wizard === */}\n      {(step === STEPS.NAME || step === STEPS.GOAL ||\n        (step >= STEPS.INCOME_START && step < STEPS.EXPENSE_START) ||\n        (step >= STEPS.EXPENSE_START && step < STEPS.QNA)) && (\n        <div className=\"input-row\">\n          <input\n            ref={inputRef}\n            type={step >= STEPS.INCOME_START && step < STEPS.QNA ? \"number\" : \"text\"}\n            value={input}\n            onChange={e => setInput(e.target.value)}\n            onKeyDown={e => e.key === \"Enter\" && handleBudgetStepper()}\n            aria-label=\"Your answer\"\n            style={{ flex: 1, minWidth: 0 }}\n            disabled={loading}\n            tabIndex={0}\n          />\n          <button\n            className=\"bubble-action-btn\"\n            onClick={handleBudgetStepper}\n            disabled={loading || !input.trim()}\n            aria-label=\"Send\"\n            tabIndex={0}\n          >\n            Send\n          </button>\n        </div>\n      )}\n\n      {/* === Q&A Step === */}\n      {step === STEPS.QNA && (\n        <div className=\"bot-bubble bubble-animate\">\n          {!qaResponse && (\n            <>\n              <label htmlFor=\"qna-input\">Ask a question about your budget or money:</label>\n              <input\n                id=\"qna-input\"\n                type=\"text\"\n                ref={inputRef}\n                value={qaInput}\n                onChange={e => setQaInput(e.target.value)}\n                onKeyDown={e => e.key === \"Enter\" && askQuestion()}\n                aria-label=\"Your budgeting question\"\n                style={{ marginTop: 6, marginBottom: 10 }}\n                disabled={loading}\n              />\n              <button\n                className=\"bubble-action-btn\"\n                onClick={askQuestion}\n                disabled={loading || !qaInput.trim()}\n              >\n                {loading ? \"Thinking...\" : \"Ask\"}\n              </button>\n            </>\n          )}\n          {qaResponse && (\n            <>\n              <div style={{ marginBottom: 10 }}>\n                <strong>Answer:</strong>\n                <div style={{ marginTop: 6, marginBottom: 10 }}>{qaResponse}</div>\n              </div>\n              <div style={{ display: \"flex\", gap: 10 }}>\n                <button\n                  className=\"bubble-action-btn\"\n                  onClick={() => {\n                    setQaResponse(null);\n                    setQaInput(\"\");\n                  }}\n                >\n                  Ask another question\n                </button>\n                <button\n                  className=\"bubble-action-btn\"\n                  onClick={() => setStep(STEPS.DOWNLOAD)}\n                >\n                  Finish & Download Budget Spreadsheet\n                </button>\n              </div>\n            </>\n          )}\n        </div>\n      )}\n\n      {/* === Download Step === */}\n      {step === STEPS.DOWNLOAD && (\n        <div className=\"bot-bubble bubble-animate\">\n          <p>Download your budget template as a spreadsheet</p>\n          <button\n            className=\"bubble-action-btn\"\n            onClick={downloadSpreadsheet}\n            disabled={loading}\n          >\n            Download\n          </button>\n          {spreadsheetUrl && (\n            <a href={spreadsheetUrl} download=\"budget.xlsx\">Click here if your download does not start.</a>\n          )}\n        </div>\n      )}\n    </div>\n  ); \n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}