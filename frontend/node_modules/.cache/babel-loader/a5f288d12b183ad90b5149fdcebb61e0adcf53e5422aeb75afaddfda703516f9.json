{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\gvsux\\\\OneDrive\\\\Desktop\\\\Anangwe\\\\Budgeting-Bot\\\\frontend\\\\src\\\\components\\\\ChatWindow.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from \"react\";\nimport axios from \"axios\";\nimport botAvatar from \"../assets/bot.png\";\nimport userAvatar from \"../assets/user.png\";\nimport \"../styles.css\";\n\n// Step constants (adjust as needed)\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst STEPS = {\n  NAME: 0,\n  GOAL: 1,\n  INCOME_START: 2,\n  EXPENSE_START: 8,\n  // (income fields count + 2)\n  QNA: 16,\n  // (income + expense fields count + 2)\n  DOWNLOAD: 17 // one after QNA\n};\nconst incomeSources = [\"Job\", \"Side-hustle\", \"Family support\", \"Scholarships\", \"Reimbursements\", \"Tax refunds\"];\nconst expenseCategories = [\"Rent\", \"Groceries\", \"Utilities\", \"Transport\", \"Tuition\", \"Dining out\", \"Entertainment\", \"Other\"];\nexport default function ChatWindow() {\n  _s();\n  // App state\n  const [theme, setTheme] = useState(\"light\");\n  const [fontSize, setFontSize] = useState(1.0);\n  const [step, setStep] = useState(STEPS.NAME);\n  const [userState, setUserState] = useState({\n    name: \"\",\n    goal: \"\",\n    income: {},\n    expenses: {},\n    qna: \"\"\n  });\n  const [input, setInput] = useState(\"\");\n  const [qaInput, setQaInput] = useState(\"\");\n  const [qaResponse, setQaResponse] = useState(null);\n  const [spreadsheetUrl, setSpreadsheetUrl] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  // Chat history: Each entry is {from: 'bot'|'user', text: string}\n  const [messages, setMessages] = useState([{\n    from: \"bot\",\n    text: \"Hello, I am FinBot, your AI Budgeting Assistant. What is your name?\"\n  }]);\n  const inputRef = useRef(null);\n  const chatEndRef = useRef(null);\n  useEffect(() => {\n    if (inputRef.current) inputRef.current.focus();\n  }, [step, loading, qaResponse]);\n  useEffect(() => {\n    if (chatEndRef.current) chatEndRef.current.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }, [messages, qaResponse, loading]);\n  const handleRestart = () => {\n    setMessages([{\n      from: \"bot\",\n      text: \"Hello, I am FinBot, your AI Budgeting Assistant. What is your name?\"\n    }]);\n    setStep(STEPS.NAME);\n    setUserState({\n      name: \"\",\n      goal: \"\",\n      income: {},\n      expenses: {},\n      qna: \"\"\n    });\n    setInput(\"\");\n    setQaInput(\"\");\n    setQaResponse(null);\n    setSpreadsheetUrl(\"\");\n  };\n\n  // Add to chat history\n  const addMessage = (from, text) => {\n    setMessages(prev => [...prev, {\n      from,\n      text\n    }]);\n  };\n\n  // Stepper logic for budget wizard (name, goal, incomes, expenses)\n  const handleBudgetStepper = () => {\n    if (!input.trim()) return;\n    if (step === STEPS.NAME) {\n      addMessage(\"user\", input);\n      setUserState(s => ({\n        ...s,\n        name: input\n      }));\n      setInput(\"\");\n      setTimeout(() => {\n        addMessage(\"bot\", \"What is your main financial goal this month?\");\n        setStep(STEPS.GOAL);\n      }, 350);\n    } else if (step === STEPS.GOAL) {\n      addMessage(\"user\", input);\n      setUserState(s => ({\n        ...s,\n        goal: input\n      }));\n      setInput(\"\");\n      setTimeout(() => {\n        addMessage(\"bot\", `How much do you earn monthly from ${incomeSources[0]}?`);\n        setStep(STEPS.INCOME_START);\n      }, 350);\n    } else if (step >= STEPS.INCOME_START && step < STEPS.EXPENSE_START) {\n      const idx = step - STEPS.INCOME_START;\n      addMessage(\"user\", `$${input} from ${incomeSources[idx]}`);\n      setUserState(s => ({\n        ...s,\n        income: {\n          ...s.income,\n          [incomeSources[idx]]: Number(input)\n        }\n      }));\n      setInput(\"\");\n      if (idx + 1 < incomeSources.length) {\n        setTimeout(() => {\n          addMessage(\"bot\", `How much do you earn monthly from ${incomeSources[idx + 1]}?`);\n          setStep(step + 1);\n        }, 350);\n      } else {\n        setTimeout(() => {\n          addMessage(\"bot\", `How much do you spend monthly on ${expenseCategories[0]}?`);\n          setStep(STEPS.EXPENSE_START);\n        }, 350);\n      }\n    } else if (step >= STEPS.EXPENSE_START && step < STEPS.QNA) {\n      const idx = step - STEPS.EXPENSE_START;\n      addMessage(\"user\", `$${input} for ${expenseCategories[idx]}`);\n      setUserState(s => ({\n        ...s,\n        expenses: {\n          ...s.expenses,\n          [expenseCategories[idx]]: Number(input)\n        }\n      }));\n      setInput(\"\");\n      if (idx + 1 < expenseCategories.length) {\n        setTimeout(() => {\n          addMessage(\"bot\", `How much do you spend monthly on ${expenseCategories[idx + 1]}?`);\n          setStep(step + 1);\n        }, 350);\n      } else {\n        setTimeout(() => {\n          addMessage(\"bot\", \"All set! Now you can ask me any question about your budget or money. I'll give you actionable tips based on your info.\");\n          setStep(STEPS.QNA);\n        }, 350);\n      }\n    }\n  };\n\n  // Q&A logic\n  const askQuestion = async () => {\n    setLoading(true);\n    addMessage(\"user\", qaInput);\n    try {\n      const res = await axios.post(\"http://localhost:8000/chat\", {\n        step: \"qna\",\n        user_state: {\n          ...userState,\n          qna: qaInput\n        }\n      });\n      setQaResponse(res.data.response);\n      // Show bot's answer as a chat bubble with avatar\n      addMessage(\"bot\", /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Answer:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: 6,\n            marginBottom: 10\n          },\n          children: res.data.response.summary\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this), res.data.response.tips && res.data.response.tips.length > 0 && /*#__PURE__*/_jsxDEV(\"ul\", {\n          style: {\n            marginBottom: 12\n          },\n          children: res.data.response.tips.map((tip, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n            style: {\n              marginLeft: 12\n            },\n            children: tip\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, this));\n      setQaInput(\"\");\n    } catch (error) {\n      setQaResponse({\n        summary: \"Sorry, could not get an answer.\",\n        tips: []\n      });\n      addMessage(\"bot\", \"Sorry, could not get an answer.\");\n    }\n    setLoading(false);\n  };\n\n  // Download spreadsheet\n  const downloadSpreadsheet = async () => {\n    setLoading(true);\n    try {\n      const res = await axios.post(\"http://localhost:8000/export-budget\", userState, {\n        responseType: \"blob\"\n      });\n      const url = URL.createObjectURL(new Blob([res.data]));\n      setSpreadsheetUrl(url);\n      addMessage(\"bot\", \"Your budget spreadsheet is ready!\");\n    } catch (err) {\n      alert(\"Download failed.\");\n    }\n    setLoading(false);\n  };\n  const fontSizePct = Math.round(fontSize * 100);\n\n  // Chat rendering (including Q&A and Download steps)\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `chat-window-modern ${theme}`,\n    style: {\n      fontSize: `${fontSize}em`\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"theme-toggle-row\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        \"aria-label\": `Switch to ${theme === \"dark\" ? \"light\" : \"dark\"} mode`,\n        title: `Switch to ${theme === \"dark\" ? \"light\" : \"dark\"} mode`,\n        className: \"theme-toggle-btn\",\n        tabIndex: 0,\n        onClick: () => setTheme(theme === \"dark\" ? \"light\" : \"dark\"),\n        children: theme === \"dark\" ? \"ðŸŒž Light Mode\" : \"ðŸŒ™ Dark Mode\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        \"aria-label\": `Increase font size (current: ${fontSizePct}%)`,\n        className: \"font-size-btn\",\n        tabIndex: 0,\n        style: {\n          marginLeft: 8\n        },\n        onClick: () => setFontSize(f => Math.min(f + 0.15, 1.7)),\n        children: \"A+\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        \"aria-label\": `Decrease font size (current: ${fontSizePct}%)`,\n        className: \"font-size-btn\",\n        tabIndex: 0,\n        style: {\n          marginLeft: 2\n        },\n        onClick: () => setFontSize(f => Math.max(f - 0.15, 0.7)),\n        children: \"A-\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"restart-btn\",\n        tabIndex: 0,\n        \"aria-label\": \"Restart conversation\",\n        style: {\n          marginLeft: 16\n        },\n        onClick: handleRestart,\n        children: \"Restart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-scrollbox gradient-bg\",\n      children: [messages.map((msg, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `bubble-row ${msg.from === \"user\" ? \"right\" : \"left\"}`,\n        style: {\n          display: \"flex\",\n          alignItems: \"flex-end\",\n          justifyContent: msg.from === \"user\" ? \"flex-end\" : \"flex-start\",\n          flexDirection: \"row\"\n        },\n        children: msg.from === \"user\" ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"user-bubble bubble-animate\",\n            tabIndex: 0,\n            role: \"status\",\n            \"aria-live\": \"polite\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                flex: 1\n              },\n              children: msg.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: userAvatar,\n            alt: \"User avatar\",\n            className: \"bubble-avatar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: botAvatar,\n            alt: \"FinBot avatar\",\n            className: \"bubble-avatar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bot-bubble bubble-animate\",\n            tabIndex: 0,\n            role: \"status\",\n            \"aria-live\": \"polite\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                flex: 1\n              },\n              children: msg.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true)\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: chatEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 7\n    }, this), (step === STEPS.NAME || step === STEPS.GOAL || step >= STEPS.INCOME_START && step < STEPS.EXPENSE_START || step >= STEPS.EXPENSE_START && step < STEPS.QNA) && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"input-row\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        ref: inputRef,\n        type: step >= STEPS.INCOME_START && step < STEPS.QNA ? \"number\" : \"text\",\n        value: input,\n        onChange: e => setInput(e.target.value),\n        onKeyDown: e => e.key === \"Enter\" && handleBudgetStepper(),\n        \"aria-label\": \"Your answer\",\n        style: {\n          flex: 1,\n          minWidth: 0\n        },\n        disabled: loading,\n        tabIndex: 0\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"bubble-action-btn\",\n        onClick: handleBudgetStepper,\n        disabled: loading || !input.trim(),\n        \"aria-label\": \"Send\",\n        tabIndex: 0,\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 9\n    }, this), step === STEPS.QNA && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bot-bubble bubble-animate\",\n      children: [!qaResponse && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"qna-input\",\n          children: \"Ask a question about your budget or money:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"qna-input\",\n          type: \"text\",\n          ref: inputRef,\n          value: qaInput,\n          onChange: e => setQaInput(e.target.value),\n          onKeyDown: e => e.key === \"Enter\" && askQuestion(),\n          \"aria-label\": \"Your budgeting question\",\n          style: {\n            marginTop: 6,\n            marginBottom: 10\n          },\n          disabled: loading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"bubble-action-btn\",\n          onClick: askQuestion,\n          disabled: loading || !qaInput.trim(),\n          children: loading ? \"Thinking...\" : \"Ask\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true), qaResponse && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: 10\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Answer:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 6,\n              marginBottom: 10\n            },\n            children: qaResponse.summary\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 17\n          }, this), qaResponse.tips && qaResponse.tips.length > 0 && /*#__PURE__*/_jsxDEV(\"ul\", {\n            style: {\n              marginBottom: 12\n            },\n            children: qaResponse.tips.map((tip, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n              style: {\n                marginLeft: 12\n              },\n              children: tip\n            }, i, false, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 23\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            gap: 10\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"bubble-action-btn\",\n            onClick: () => {\n              setQaResponse(null);\n              setQaInput(\"\");\n            },\n            children: \"Ask another question\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"bubble-action-btn\",\n            onClick: () => setStep(STEPS.DOWNLOAD),\n            children: \"Finish & Download Budget Spreadsheet\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 9\n    }, this), step === STEPS.DOWNLOAD && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bot-bubble bubble-animate\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Download your budget template as a spreadsheet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"bubble-action-btn\",\n        onClick: downloadSpreadsheet,\n        disabled: loading,\n        children: \"Download\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 11\n      }, this), spreadsheetUrl && /*#__PURE__*/_jsxDEV(\"a\", {\n        href: spreadsheetUrl,\n        download: \"budget.xlsx\",\n        children: \"Click here if your download does not start.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 193,\n    columnNumber: 5\n  }, this);\n}\n_s(ChatWindow, \"0zJyPI86OCaBJ00cg+s8h+Rqu+c=\");\n_c = ChatWindow;\nvar _c;\n$RefreshReg$(_c, \"ChatWindow\");","map":{"version":3,"names":["React","useState","useRef","useEffect","axios","botAvatar","userAvatar","jsxDEV","_jsxDEV","Fragment","_Fragment","STEPS","NAME","GOAL","INCOME_START","EXPENSE_START","QNA","DOWNLOAD","incomeSources","expenseCategories","ChatWindow","_s","theme","setTheme","fontSize","setFontSize","step","setStep","userState","setUserState","name","goal","income","expenses","qna","input","setInput","qaInput","setQaInput","qaResponse","setQaResponse","spreadsheetUrl","setSpreadsheetUrl","loading","setLoading","messages","setMessages","from","text","inputRef","chatEndRef","current","focus","scrollIntoView","behavior","handleRestart","addMessage","prev","handleBudgetStepper","trim","s","setTimeout","idx","Number","length","askQuestion","res","post","user_state","data","response","children","fileName","_jsxFileName","lineNumber","columnNumber","style","marginTop","marginBottom","summary","tips","map","tip","i","marginLeft","error","downloadSpreadsheet","responseType","url","URL","createObjectURL","Blob","err","alert","fontSizePct","Math","round","className","title","tabIndex","onClick","f","min","max","msg","display","alignItems","justifyContent","flexDirection","role","flex","src","alt","ref","type","value","onChange","e","target","onKeyDown","key","minWidth","disabled","htmlFor","id","gap","href","download","_c","$RefreshReg$"],"sources":["C:/Users/gvsux/OneDrive/Desktop/Anangwe/Budgeting-Bot/frontend/src/components/ChatWindow.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\nimport axios from \"axios\";\nimport botAvatar from \"../assets/bot.png\";\nimport userAvatar from \"../assets/user.png\";\nimport \"../styles.css\";\n\n// Step constants (adjust as needed)\nconst STEPS = {\n  NAME: 0,\n  GOAL: 1,\n  INCOME_START: 2,\n  EXPENSE_START: 8, // (income fields count + 2)\n  QNA: 16,          // (income + expense fields count + 2)\n  DOWNLOAD: 17      // one after QNA\n};\n\nconst incomeSources = [\n  \"Job\", \"Side-hustle\", \"Family support\", \"Scholarships\", \"Reimbursements\", \"Tax refunds\"\n];\nconst expenseCategories = [\n  \"Rent\", \"Groceries\", \"Utilities\", \"Transport\", \"Tuition\", \"Dining out\", \"Entertainment\", \"Other\"\n];\n\nexport default function ChatWindow() {\n  // App state\n  const [theme, setTheme] = useState(\"light\");\n  const [fontSize, setFontSize] = useState(1.0);\n  const [step, setStep] = useState(STEPS.NAME);\n  const [userState, setUserState] = useState({\n    name: \"\",\n    goal: \"\",\n    income: {},\n    expenses: {},\n    qna: \"\"\n  });\n  const [input, setInput] = useState(\"\");\n  const [qaInput, setQaInput] = useState(\"\");\n  const [qaResponse, setQaResponse] = useState(null);\n  const [spreadsheetUrl, setSpreadsheetUrl] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  // Chat history: Each entry is {from: 'bot'|'user', text: string}\n  const [messages, setMessages] = useState([\n    { from: \"bot\", text: \"Hello, I am FinBot, your AI Budgeting Assistant. What is your name?\" }\n  ]);\n  const inputRef = useRef(null);\n  const chatEndRef = useRef(null);\n\n  useEffect(() => {\n    if (inputRef.current) inputRef.current.focus();\n  }, [step, loading, qaResponse]);\n\n  useEffect(() => {\n    if (chatEndRef.current) chatEndRef.current.scrollIntoView({ behavior: \"smooth\" });\n  }, [messages, qaResponse, loading]);\n\n  const handleRestart = () => {\n    setMessages([\n      { from: \"bot\", text: \"Hello, I am FinBot, your AI Budgeting Assistant. What is your name?\" }\n    ]);\n    setStep(STEPS.NAME);\n    setUserState({\n      name: \"\",\n      goal: \"\",\n      income: {},\n      expenses: {},\n      qna: \"\"\n    });\n    setInput(\"\");\n    setQaInput(\"\");\n    setQaResponse(null);\n    setSpreadsheetUrl(\"\");\n  };\n\n  // Add to chat history\n  const addMessage = (from, text) => {\n    setMessages(prev => [...prev, { from, text }]);\n  };\n\n  // Stepper logic for budget wizard (name, goal, incomes, expenses)\n  const handleBudgetStepper = () => {\n    if (!input.trim()) return;\n    if (step === STEPS.NAME) {\n      addMessage(\"user\", input);\n      setUserState(s => ({ ...s, name: input }));\n      setInput(\"\");\n      setTimeout(() => {\n        addMessage(\"bot\", \"What is your main financial goal this month?\");\n        setStep(STEPS.GOAL);\n      }, 350);\n    } else if (step === STEPS.GOAL) {\n      addMessage(\"user\", input);\n      setUserState(s => ({ ...s, goal: input }));\n      setInput(\"\");\n      setTimeout(() => {\n        addMessage(\"bot\", `How much do you earn monthly from ${incomeSources[0]}?`);\n        setStep(STEPS.INCOME_START);\n      }, 350);\n    } else if (step >= STEPS.INCOME_START && step < STEPS.EXPENSE_START) {\n      const idx = step - STEPS.INCOME_START;\n      addMessage(\"user\", `$${input} from ${incomeSources[idx]}`);\n      setUserState(s => ({\n        ...s,\n        income: { ...s.income, [incomeSources[idx]]: Number(input) }\n      }));\n      setInput(\"\");\n      if (idx + 1 < incomeSources.length) {\n        setTimeout(() => {\n          addMessage(\"bot\", `How much do you earn monthly from ${incomeSources[idx + 1]}?`);\n          setStep(step + 1);\n        }, 350);\n      } else {\n        setTimeout(() => {\n          addMessage(\"bot\", `How much do you spend monthly on ${expenseCategories[0]}?`);\n          setStep(STEPS.EXPENSE_START);\n        }, 350);\n      }\n    } else if (step >= STEPS.EXPENSE_START && step < STEPS.QNA) {\n      const idx = step - STEPS.EXPENSE_START;\n      addMessage(\"user\", `$${input} for ${expenseCategories[idx]}`);\n      setUserState(s => ({\n        ...s,\n        expenses: { ...s.expenses, [expenseCategories[idx]]: Number(input) }\n      }));\n      setInput(\"\");\n      if (idx + 1 < expenseCategories.length) {\n        setTimeout(() => {\n          addMessage(\"bot\", `How much do you spend monthly on ${expenseCategories[idx + 1]}?`);\n          setStep(step + 1);\n        }, 350);\n      } else {\n        setTimeout(() => {\n          addMessage(\"bot\", \"All set! Now you can ask me any question about your budget or money. I'll give you actionable tips based on your info.\");\n          setStep(STEPS.QNA);\n        }, 350);\n      }\n    }\n  };\n\n  // Q&A logic\n  const askQuestion = async () => {\n    setLoading(true);\n    addMessage(\"user\", qaInput);\n    try {\n      const res = await axios.post(\"http://localhost:8000/chat\", {\n        step: \"qna\",\n        user_state: { ...userState, qna: qaInput }\n      });\n      setQaResponse(res.data.response);\n      // Show bot's answer as a chat bubble with avatar\n      addMessage(\"bot\", (\n        <span>\n          <strong>Answer:</strong>\n          <div style={{ marginTop: 6, marginBottom: 10 }}>{res.data.response.summary}</div>\n          {res.data.response.tips && res.data.response.tips.length > 0 && (\n            <ul style={{ marginBottom: 12 }}>\n              {res.data.response.tips.map((tip, i) => (\n                <li key={i} style={{ marginLeft: 12 }}>{tip}</li>\n              ))}\n            </ul>\n          )}\n        </span>\n      ));\n      setQaInput(\"\");\n    } catch (error) {\n      setQaResponse({\n        summary: \"Sorry, could not get an answer.\",\n        tips: []\n      });\n      addMessage(\"bot\", \"Sorry, could not get an answer.\");\n    }\n    setLoading(false);\n  };\n\n  // Download spreadsheet\n  const downloadSpreadsheet = async () => {\n    setLoading(true);\n    try {\n      const res = await axios.post(\"http://localhost:8000/export-budget\", userState, { responseType: \"blob\" });\n      const url = URL.createObjectURL(new Blob([res.data]));\n      setSpreadsheetUrl(url);\n      addMessage(\"bot\", \"Your budget spreadsheet is ready!\");\n    } catch (err) {\n      alert(\"Download failed.\");\n    }\n    setLoading(false);\n  };\n\n  const fontSizePct = Math.round(fontSize * 100);\n\n  // Chat rendering (including Q&A and Download steps)\n  return (\n    <div className={`chat-window-modern ${theme}`} style={{ fontSize: `${fontSize}em` }}>\n      <div className=\"theme-toggle-row\">\n        <button\n          aria-label={`Switch to ${theme === \"dark\" ? \"light\" : \"dark\"} mode`}\n          title={`Switch to ${theme === \"dark\" ? \"light\" : \"dark\"} mode`}\n          className=\"theme-toggle-btn\"\n          tabIndex={0}\n          onClick={() => setTheme(theme === \"dark\" ? \"light\" : \"dark\")}\n        >\n          {theme === \"dark\" ? \"ðŸŒž Light Mode\" : \"ðŸŒ™ Dark Mode\"}\n        </button>\n        <button\n          aria-label={`Increase font size (current: ${fontSizePct}%)`}\n          className=\"font-size-btn\"\n          tabIndex={0}\n          style={{ marginLeft: 8 }}\n          onClick={() => setFontSize(f => Math.min(f + 0.15, 1.7))}\n        >A+</button>\n        <button\n          aria-label={`Decrease font size (current: ${fontSizePct}%)`}\n          className=\"font-size-btn\"\n          tabIndex={0}\n          style={{ marginLeft: 2 }}\n          onClick={() => setFontSize(f => Math.max(f - 0.15, 0.7))}\n        >A-</button>\n        <button\n          className=\"restart-btn\"\n          tabIndex={0}\n          aria-label=\"Restart conversation\"\n          style={{ marginLeft: 16 }}\n          onClick={handleRestart}\n        >Restart</button>\n      </div>\n      <div className=\"chat-scrollbox gradient-bg\">\n        {messages.map((msg, i) => (\n          <div\n            key={i}\n            className={`bubble-row ${msg.from === \"user\" ? \"right\" : \"left\"}`}\n            style={{\n              display: \"flex\",\n              alignItems: \"flex-end\",\n              justifyContent: msg.from === \"user\" ? \"flex-end\" : \"flex-start\",\n              flexDirection: \"row\"\n            }}\n          >\n            {msg.from === \"user\" ? (\n              <>\n                <div className=\"user-bubble bubble-animate\" tabIndex={0} role=\"status\" aria-live=\"polite\">\n                  <span style={{ flex: 1 }}>{msg.text}</span>\n                </div>\n                <img\n                  src={userAvatar}\n                  alt=\"User avatar\"\n                  className=\"bubble-avatar\"\n                />\n              </>\n            ) : (\n              <>\n                <img\n                  src={botAvatar}\n                  alt=\"FinBot avatar\"\n                  className=\"bubble-avatar\"\n                />\n                <div className=\"bot-bubble bubble-animate\" tabIndex={0} role=\"status\" aria-live=\"polite\">\n                  <span style={{ flex: 1 }}>{msg.text}</span>\n                </div>\n              </>\n            )}\n          </div>\n        ))}\n        <div ref={chatEndRef} />\n      </div>\n\n      {/* === Stepper logic for wizard === */}\n      {(step === STEPS.NAME || step === STEPS.GOAL ||\n        (step >= STEPS.INCOME_START && step < STEPS.EXPENSE_START) ||\n        (step >= STEPS.EXPENSE_START && step < STEPS.QNA)) && (\n        <div className=\"input-row\">\n          <input\n            ref={inputRef}\n            type={step >= STEPS.INCOME_START && step < STEPS.QNA ? \"number\" : \"text\"}\n            value={input}\n            onChange={e => setInput(e.target.value)}\n            onKeyDown={e => e.key === \"Enter\" && handleBudgetStepper()}\n            aria-label=\"Your answer\"\n            style={{ flex: 1, minWidth: 0 }}\n            disabled={loading}\n            tabIndex={0}\n          />\n          <button\n            className=\"bubble-action-btn\"\n            onClick={handleBudgetStepper}\n            disabled={loading || !input.trim()}\n            aria-label=\"Send\"\n            tabIndex={0}\n          >\n            Send\n          </button>\n        </div>\n      )}\n\n      {/* === Q&A Step === */}\n      {step === STEPS.QNA && (\n        <div className=\"bot-bubble bubble-animate\">\n          {!qaResponse && (\n            <>\n              <label htmlFor=\"qna-input\">Ask a question about your budget or money:</label>\n              <input\n                id=\"qna-input\"\n                type=\"text\"\n                ref={inputRef}\n                value={qaInput}\n                onChange={e => setQaInput(e.target.value)}\n                onKeyDown={e => e.key === \"Enter\" && askQuestion()}\n                aria-label=\"Your budgeting question\"\n                style={{ marginTop: 6, marginBottom: 10 }}\n                disabled={loading}\n              />\n              <button\n                className=\"bubble-action-btn\"\n                onClick={askQuestion}\n                disabled={loading || !qaInput.trim()}\n              >\n                {loading ? \"Thinking...\" : \"Ask\"}\n              </button>\n            </>\n          )}\n          {qaResponse && (\n            <>\n              <div style={{ marginBottom: 10 }}>\n                <strong>Answer:</strong>\n                <div style={{ marginTop: 6, marginBottom: 10 }}>{qaResponse.summary}</div>\n                {qaResponse.tips && qaResponse.tips.length > 0 && (\n                  <ul style={{ marginBottom: 12 }}>\n                    {qaResponse.tips.map((tip, i) => (\n                      <li key={i} style={{ marginLeft: 12 }}>{tip}</li>\n                    ))}\n                  </ul>\n                )}\n              </div>\n              <div style={{ display: \"flex\", gap: 10 }}>\n                <button\n                  className=\"bubble-action-btn\"\n                  onClick={() => {\n                    setQaResponse(null);\n                    setQaInput(\"\");\n                  }}\n                >\n                  Ask another question\n                </button>\n                <button\n                  className=\"bubble-action-btn\"\n                  onClick={() => setStep(STEPS.DOWNLOAD)}\n                >\n                  Finish & Download Budget Spreadsheet\n                </button>\n              </div>\n            </>\n          )}\n        </div>\n      )}\n\n      {/* === Download Step === */}\n      {step === STEPS.DOWNLOAD && (\n        <div className=\"bot-bubble bubble-animate\">\n          <p>Download your budget template as a spreadsheet</p>\n          <button\n            className=\"bubble-action-btn\"\n            onClick={downloadSpreadsheet}\n            disabled={loading}\n          >\n            Download\n          </button>\n          {spreadsheetUrl && (\n            <a href={spreadsheetUrl} download=\"budget.xlsx\">Click here if your download does not start.</a>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}