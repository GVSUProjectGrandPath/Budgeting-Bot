{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\gvsux\\\\OneDrive\\\\Desktop\\\\Anangwe\\\\Budgeting-Bot\\\\frontend\\\\src\\\\components\\\\ChatWindow.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from \"react\";\nimport axios from \"axios\";\nimport botAvatar from \"../assets/bot.png\";\nimport userAvatar from \"../assets/user.png\";\nimport \"../styles.css\";\n\n// Step constants\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst STEPS = {\n  NAME: 0,\n  GOAL: 1,\n  INCOME_START: 2,\n  EXPENSE_START: 8,\n  // (income fields count + 2)\n  QNA: 16,\n  // (income + expense fields count + 2)\n  DOWNLOAD: 17 // one after QNA\n};\nconst incomeSources = [\"Job\", \"Side-hustle\", \"Family support\", \"Scholarships\", \"Reimbursements\", \"Tax refunds\"];\nconst expenseCategories = [\"Rent\", \"Groceries\", \"Utilities\", \"Transport\", \"Tuition\", \"Dining out\", \"Entertainment\", \"Other\"];\nexport default function ChatWindow() {\n  _s();\n  const [theme, setTheme] = useState(\"light\");\n  const [fontSize, setFontSize] = useState(1.0);\n  const [step, setStep] = useState(STEPS.NAME);\n  const [userState, setUserState] = useState({\n    name: \"\",\n    goal: \"\",\n    income: {},\n    expenses: {},\n    qna: \"\"\n  });\n  const [input, setInput] = useState(\"\");\n  const [qaInput, setQaInput] = useState(\"\");\n  const [qaResponse, setQaResponse] = useState(null);\n  const [spreadsheetUrl, setSpreadsheetUrl] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [messages, setMessages] = useState([{\n    from: \"bot\",\n    text: \"Hello, I am FinBot, your AI Budgeting Assistant.\\nGet ready to answer some questions.\\n What is your name?\"\n  }]);\n  const inputRef = useRef(null);\n  const chatEndRef = useRef(null);\n  useEffect(() => {\n    if (inputRef.current) inputRef.current.focus();\n  }, [step, loading, qaResponse]);\n  useEffect(() => {\n    if (chatEndRef.current) chatEndRef.current.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }, [messages, qaResponse, loading]);\n  const handleRestart = () => {\n    setMessages([{\n      from: \"bot\",\n      text: \"Hello, I am FinBot, your AI Budgeting Assistant.\\nGet ready to answer some questions.\\n What is your name?\"\n    }]);\n    setStep(STEPS.NAME);\n    setUserState({\n      name: \"\",\n      goal: \"\",\n      income: {},\n      expenses: {},\n      qna: \"\"\n    });\n    setInput(\"\");\n    setQaInput(\"\");\n    setQaResponse(null);\n    setSpreadsheetUrl(\"\");\n  };\n  const addMessage = (from, text) => {\n    setMessages(prev => [...prev, {\n      from,\n      text\n    }]);\n  };\n\n  // Stepper logic\n  const handleBudgetStepper = () => {\n    if (!input.trim()) return;\n    if (step === STEPS.NAME) {\n      addMessage(\"user\", input);\n      setUserState(s => ({\n        ...s,\n        name: input\n      }));\n      setInput(\"\");\n      setTimeout(() => {\n        addMessage(\"bot\", \"What is your main financial goal this month?\");\n        setStep(STEPS.GOAL);\n      }, 350);\n    } else if (step === STEPS.GOAL) {\n      addMessage(\"user\", input);\n      setUserState(s => ({\n        ...s,\n        goal: input\n      }));\n      setInput(\"\");\n      setTimeout(() => {\n        addMessage(\"bot\", `How much do you get monthly from your ${incomeSources[0]}?`);\n        setStep(STEPS.INCOME_START);\n      }, 350);\n    } else if (step >= STEPS.INCOME_START && step < STEPS.EXPENSE_START) {\n      const idx = step - STEPS.INCOME_START;\n      addMessage(\"user\", `$${input} from ${incomeSources[idx]}`);\n      setUserState(s => ({\n        ...s,\n        income: {\n          ...s.income,\n          [incomeSources[idx]]: Number(input)\n        }\n      }));\n      setInput(\"\");\n      if (idx + 1 < incomeSources.length) {\n        setTimeout(() => {\n          addMessage(\"bot\", `How much do you get monthly from your ${incomeSources[idx + 1]}?`);\n          setStep(step + 1);\n        }, 350);\n      } else {\n        setTimeout(() => {\n          addMessage(\"bot\", `How much do you spend monthly on ${expenseCategories[0]}?`);\n          setStep(STEPS.EXPENSE_START);\n        }, 350);\n      }\n    } else if (step >= STEPS.EXPENSE_START && step < STEPS.QNA) {\n      const idx = step - STEPS.EXPENSE_START;\n      addMessage(\"user\", `$${input} for ${expenseCategories[idx]}`);\n      setUserState(s => ({\n        ...s,\n        expenses: {\n          ...s.expenses,\n          [expenseCategories[idx]]: Number(input)\n        }\n      }));\n      setInput(\"\");\n      if (idx + 1 < expenseCategories.length) {\n        setTimeout(() => {\n          addMessage(\"bot\", `How much do you spend monthly on ${expenseCategories[idx + 1]}?`);\n          setStep(step + 1);\n        }, 350);\n      } else {\n        setTimeout(() => {\n          addMessage(\"bot\", \"All set! Now you can ask me any question about your income, spending or money management.\\n I'll give you actionable tips based on your info.\");\n          setStep(STEPS.QNA);\n        }, 350);\n      }\n    }\n  };\n\n  // Q&A logic\n  const QNA_STEP = 16; // Should match STEPS.QNA in your backend\n\n  const askQuestion = async () => {\n    setLoading(true);\n    addMessage(\"user\", qaInput);\n    try {\n      const res = await axios.post(\"http://localhost:8000/chat\", {\n        step: QNA_STEP,\n        user_state: {\n          name: userState.name,\n          goal: userState.goal,\n          income: userState.income,\n          expenses: userState.expenses,\n          qna: qaInput\n        }\n      });\n\n      // Add the answer to the chat bubble area\n      if (typeof res.data.response === \"object\" && res.data.response !== null && \"summary\" in res.data.response) {\n        let answer = res.data.response.summary;\n        if (res.data.response.tips && res.data.response.tips.length > 0) {\n          answer += \"\\n\" + res.data.response.tips.map(tip => `• ${tip}`).join(\"\\n\");\n        }\n        addMessage(\"bot\", answer);\n      } else {\n        addMessage(\"bot\", res.data.response);\n      }\n      setQaInput(\"\");\n      setQaResponse(true); // Only used to show/hide the buttons, not for answer rendering\n    } catch (error) {\n      addMessage(\"bot\", \"Sorry, could not get an answer.\");\n      setQaResponse(true);\n    }\n    setLoading(false);\n  };\n\n  // Download spreadsheet\n  const downloadSpreadsheet = async () => {\n    setLoading(true);\n    try {\n      const res = await axios.post(\"http://localhost:8000/export-budget\", userState, {\n        responseType: \"blob\"\n      });\n      const url = URL.createObjectURL(new Blob([res.data]));\n\n      // Programmatically create and click the anchor\n      const a = document.createElement(\"a\");\n      a.href = url;\n      a.download = \"budget.xlsx\";\n      document.body.appendChild(a);\n      a.click();\n      a.remove();\n\n      // For fallback link\n      setSpreadsheetUrl(url);\n      addMessage(\"bot\", \"Your budget spreadsheet is ready!\");\n    } catch (err) {\n      alert(\"Download failed.\");\n    }\n    setLoading(false);\n  };\n  const fontSizePct = Math.round(fontSize * 100);\n\n  // Chat rendering (with CSS Grid for avatars and bubbles)\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `chat-window-modern ${theme}`,\n    style: {\n      fontSize: `${fontSize}em`\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"theme-toggle-row\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        \"aria-label\": `Switch to ${theme === \"dark\" ? \"light\" : \"dark\"} mode`,\n        title: `Switch to ${theme === \"dark\" ? \"light\" : \"dark\"} mode`,\n        className: \"theme-toggle-btn\",\n        tabIndex: 0,\n        onClick: () => setTheme(theme === \"dark\" ? \"light\" : \"dark\"),\n        children: theme === \"dark\" ? \"Light\" : \"Dark\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        \"aria-label\": `Increase font size (current: ${fontSizePct}%)`,\n        className: \"font-size-btn\",\n        tabIndex: 0,\n        style: {\n          marginLeft: 8\n        },\n        onClick: () => setFontSize(f => Math.min(f + 0.15, 1.7)),\n        children: \"+\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        \"aria-label\": `Decrease font size (current: ${fontSizePct}%)`,\n        className: \"font-size-btn\",\n        tabIndex: 0,\n        style: {\n          marginLeft: 2\n        },\n        onClick: () => setFontSize(f => Math.max(f - 0.15, 0.7)),\n        children: \"-\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"restart-btn\",\n        tabIndex: 0,\n        \"aria-label\": \"Restart conversation\",\n        style: {\n          marginLeft: 16\n        },\n        onClick: handleRestart,\n        children: \"Restart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-scrollbox gradient-bg\",\n      children: [messages.map((msg, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `bubble-row ${msg.from === \"user\" ? \"right\" : \"left\"}`,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bubble-grid\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: msg.from === \"user\" ? userAvatar : botAvatar,\n            alt: msg.from === \"user\" ? \"User avatar\" : \"FinBot avatar\",\n            className: \"bubble-avatar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: msg.from === \"user\" ? \"user-bubble bubble-animate\" : \"bot-bubble bubble-animate\",\n            tabIndex: 0,\n            role: \"status\",\n            \"aria-live\": \"polite\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                flex: 1\n              },\n              children: msg.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 13\n        }, this)\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: chatEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 7\n    }, this), (step === STEPS.NAME || step === STEPS.GOAL || step >= STEPS.INCOME_START && step < STEPS.EXPENSE_START || step >= STEPS.EXPENSE_START && step < STEPS.QNA) && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"input-row\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        ref: inputRef,\n        type: step >= STEPS.INCOME_START && step < STEPS.QNA ? \"number\" : \"text\",\n        value: input,\n        onChange: e => setInput(e.target.value),\n        onKeyDown: e => e.key === \"Enter\" && handleBudgetStepper(),\n        \"aria-label\": \"Your answer\",\n        style: {\n          flex: 1,\n          minWidth: 0\n        },\n        disabled: loading,\n        tabIndex: 0\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"bubble-action-btn\",\n        onClick: handleBudgetStepper,\n        disabled: loading || !input.trim(),\n        \"aria-label\": \"Send\",\n        tabIndex: 0,\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 9\n    }, this), step === STEPS.QNA && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bot-bubble bubble-animate\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"qna-input\",\n        children: \"Ask a question about your budget or money:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"qna-input\",\n        type: \"text\",\n        ref: inputRef,\n        value: qaInput,\n        onChange: e => setQaInput(e.target.value),\n        onKeyDown: e => e.key === \"Enter\" && askQuestion(),\n        \"aria-label\": \"Your budgeting question\",\n        style: {\n          marginTop: 6,\n          marginBottom: 10,\n          width: \"100%\"\n        },\n        disabled: loading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          flexDirection: \"column\",\n          gap: 8,\n          marginTop: 8,\n          width: \"100%\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"bubble-action-btn\",\n          style: {\n            width: \"100%\"\n          },\n          onClick: askQuestion,\n          disabled: loading || !qaInput.trim(),\n          children: loading ? \"Thinking...\" : \"Ask\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"bubble-action-btn\",\n          style: {\n            width: \"100%\"\n          },\n          onClick: () => setStep(STEPS.DOWNLOAD),\n          children: \"Download\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 3\n    }, this), step === STEPS.DOWNLOAD && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bot-bubble bubble-animate\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Download your budget template as a spreadsheet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"bubble-action-btn\",\n        onClick: downloadSpreadsheet,\n        disabled: loading,\n        children: \"Download\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 11\n      }, this), spreadsheetUrl && /*#__PURE__*/_jsxDEV(\"a\", {\n        href: spreadsheetUrl,\n        download: \"budget.xlsx\",\n        children: \"Click here if your download does not start.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 208,\n    columnNumber: 5\n  }, this);\n}\n_s(ChatWindow, \"ETto84KZ1t8a6DJkWqznYy6PsRA=\");\n_c = ChatWindow;\nvar _c;\n$RefreshReg$(_c, \"ChatWindow\");","map":{"version":3,"names":["React","useState","useRef","useEffect","axios","botAvatar","userAvatar","jsxDEV","_jsxDEV","STEPS","NAME","GOAL","INCOME_START","EXPENSE_START","QNA","DOWNLOAD","incomeSources","expenseCategories","ChatWindow","_s","theme","setTheme","fontSize","setFontSize","step","setStep","userState","setUserState","name","goal","income","expenses","qna","input","setInput","qaInput","setQaInput","qaResponse","setQaResponse","spreadsheetUrl","setSpreadsheetUrl","loading","setLoading","messages","setMessages","from","text","inputRef","chatEndRef","current","focus","scrollIntoView","behavior","handleRestart","addMessage","prev","handleBudgetStepper","trim","s","setTimeout","idx","Number","length","QNA_STEP","askQuestion","res","post","user_state","data","response","answer","summary","tips","map","tip","join","error","downloadSpreadsheet","responseType","url","URL","createObjectURL","Blob","a","document","createElement","href","download","body","appendChild","click","remove","err","alert","fontSizePct","Math","round","className","style","children","title","tabIndex","onClick","fileName","_jsxFileName","lineNumber","columnNumber","marginLeft","f","min","max","msg","i","src","alt","role","flex","ref","type","value","onChange","e","target","onKeyDown","key","minWidth","disabled","htmlFor","id","marginTop","marginBottom","width","display","flexDirection","gap","_c","$RefreshReg$"],"sources":["C:/Users/gvsux/OneDrive/Desktop/Anangwe/Budgeting-Bot/frontend/src/components/ChatWindow.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\nimport axios from \"axios\";\nimport botAvatar from \"../assets/bot.png\";\nimport userAvatar from \"../assets/user.png\";\nimport \"../styles.css\";\n\n// Step constants\nconst STEPS = {\n  NAME: 0,\n  GOAL: 1,\n  INCOME_START: 2,\n  EXPENSE_START: 8, // (income fields count + 2)\n  QNA: 16,          // (income + expense fields count + 2)\n  DOWNLOAD: 17      // one after QNA\n};\n\nconst incomeSources = [\n  \"Job\", \"Side-hustle\", \"Family support\", \"Scholarships\", \"Reimbursements\", \"Tax refunds\"\n];\nconst expenseCategories = [\n  \"Rent\", \"Groceries\", \"Utilities\", \"Transport\", \"Tuition\", \"Dining out\", \"Entertainment\", \"Other\"\n];\n\nexport default function ChatWindow() {\n  const [theme, setTheme] = useState(\"light\");\n  const [fontSize, setFontSize] = useState(1.0);\n  const [step, setStep] = useState(STEPS.NAME);\n  const [userState, setUserState] = useState({\n    name: \"\",\n    goal: \"\",\n    income: {},\n    expenses: {},\n    qna: \"\"\n  });\n  const [input, setInput] = useState(\"\");\n  const [qaInput, setQaInput] = useState(\"\");\n  const [qaResponse, setQaResponse] = useState(null);\n  const [spreadsheetUrl, setSpreadsheetUrl] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const [messages, setMessages] = useState([\n    { from: \"bot\", text: \"Hello, I am FinBot, your AI Budgeting Assistant.\\nGet ready to answer some questions.\\n What is your name?\" }\n  ]);\n  const inputRef = useRef(null);\n  const chatEndRef = useRef(null);\n\n  useEffect(() => {\n    if (inputRef.current) inputRef.current.focus();\n  }, [step, loading, qaResponse]);\n\n  useEffect(() => {\n    if (chatEndRef.current) chatEndRef.current.scrollIntoView({ behavior: \"smooth\" });\n  }, [messages, qaResponse, loading]);\n\n  const handleRestart = () => {\n    setMessages([\n      { from: \"bot\", text: \"Hello, I am FinBot, your AI Budgeting Assistant.\\nGet ready to answer some questions.\\n What is your name?\" }\n    ]);\n    setStep(STEPS.NAME);\n    setUserState({\n      name: \"\",\n      goal: \"\",\n      income: {},\n      expenses: {},\n      qna: \"\"\n    });\n    setInput(\"\");\n    setQaInput(\"\");\n    setQaResponse(null);\n    setSpreadsheetUrl(\"\");\n  };\n\n  const addMessage = (from, text) => {\n    setMessages(prev => [...prev, { from, text }]);\n  };\n\n  // Stepper logic\n  const handleBudgetStepper = () => {\n    if (!input.trim()) return;\n    if (step === STEPS.NAME) {\n      addMessage(\"user\", input);\n      setUserState(s => ({ ...s, name: input }));\n      setInput(\"\");\n      setTimeout(() => {\n        addMessage(\"bot\", \"What is your main financial goal this month?\");\n        setStep(STEPS.GOAL);\n      }, 350);\n    } else if (step === STEPS.GOAL) {\n      addMessage(\"user\", input);\n      setUserState(s => ({ ...s, goal: input }));\n      setInput(\"\");\n      setTimeout(() => {\n        addMessage(\"bot\", `How much do you get monthly from your ${incomeSources[0]}?`);\n        setStep(STEPS.INCOME_START);\n      }, 350);\n    } else if (step >= STEPS.INCOME_START && step < STEPS.EXPENSE_START) {\n      const idx = step - STEPS.INCOME_START;\n      addMessage(\"user\", `$${input} from ${incomeSources[idx]}`);\n      setUserState(s => ({\n        ...s,\n        income: { ...s.income, [incomeSources[idx]]: Number(input) }\n      }));\n      setInput(\"\");\n      if (idx + 1 < incomeSources.length) {\n        setTimeout(() => {\n          addMessage(\"bot\", `How much do you get monthly from your ${incomeSources[idx + 1]}?`);\n          setStep(step + 1);\n        }, 350);\n      } else {\n        setTimeout(() => {\n          addMessage(\"bot\", `How much do you spend monthly on ${expenseCategories[0]}?`);\n          setStep(STEPS.EXPENSE_START);\n        }, 350);\n      }\n    } else if (step >= STEPS.EXPENSE_START && step < STEPS.QNA) {\n      const idx = step - STEPS.EXPENSE_START;\n      addMessage(\"user\", `$${input} for ${expenseCategories[idx]}`);\n      setUserState(s => ({\n        ...s,\n        expenses: { ...s.expenses, [expenseCategories[idx]]: Number(input) }\n      }));\n      setInput(\"\");\n      if (idx + 1 < expenseCategories.length) {\n        setTimeout(() => {\n          addMessage(\"bot\", `How much do you spend monthly on ${expenseCategories[idx + 1]}?`);\n          setStep(step + 1);\n        }, 350);\n      } else {\n        setTimeout(() => {\n          addMessage(\"bot\", \"All set! Now you can ask me any question about your income, spending or money management.\\n I'll give you actionable tips based on your info.\");\n          setStep(STEPS.QNA);\n        }, 350);\n      }\n    }\n  };\n\n  // Q&A logic\n  const QNA_STEP = 16; // Should match STEPS.QNA in your backend\n\nconst askQuestion = async () => {\n  setLoading(true);\n  addMessage(\"user\", qaInput);\n\n  try {\n    const res = await axios.post(\"http://localhost:8000/chat\", {\n      step: QNA_STEP,\n      user_state: {\n        name: userState.name,\n        goal: userState.goal,\n        income: userState.income,\n        expenses: userState.expenses,\n        qna: qaInput\n      }\n    });\n\n    // Add the answer to the chat bubble area\n    if (typeof res.data.response === \"object\" && res.data.response !== null && \"summary\" in res.data.response) {\n      let answer = res.data.response.summary;\n      if (res.data.response.tips && res.data.response.tips.length > 0) {\n        answer += \"\\n\" + res.data.response.tips.map((tip) => `• ${tip}`).join(\"\\n\");\n      }\n      addMessage(\"bot\", answer);\n    } else {\n      addMessage(\"bot\", res.data.response);\n    }\n\n    setQaInput(\"\");\n    setQaResponse(true); // Only used to show/hide the buttons, not for answer rendering\n  } catch (error) {\n    addMessage(\"bot\", \"Sorry, could not get an answer.\");\n    setQaResponse(true);\n  }\n  setLoading(false);\n};\n\n\n\n  // Download spreadsheet\n  const downloadSpreadsheet = async () => {\n  setLoading(true);\n  try {\n    const res = await axios.post(\"http://localhost:8000/export-budget\", userState, { responseType: \"blob\" });\n    const url = URL.createObjectURL(new Blob([res.data]));\n\n    // Programmatically create and click the anchor\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = \"budget.xlsx\";\n    document.body.appendChild(a);\n    a.click();\n    a.remove();\n\n    // For fallback link\n    setSpreadsheetUrl(url);\n\n    addMessage(\"bot\", \"Your budget spreadsheet is ready!\");\n  } catch (err) {\n    alert(\"Download failed.\");\n  }\n  setLoading(false);\n};\n\n\n  const fontSizePct = Math.round(fontSize * 100);\n\n  // Chat rendering (with CSS Grid for avatars and bubbles)\n  return (\n    <div className={`chat-window-modern ${theme}`} style={{ fontSize: `${fontSize}em` }}>\n      <div className=\"theme-toggle-row\">\n        <button\n          aria-label={`Switch to ${theme === \"dark\" ? \"light\" : \"dark\"} mode`}\n          title={`Switch to ${theme === \"dark\" ? \"light\" : \"dark\"} mode`}\n          className=\"theme-toggle-btn\"\n          tabIndex={0}\n          onClick={() => setTheme(theme === \"dark\" ? \"light\" : \"dark\")}\n        >\n          {theme === \"dark\" ? \"Light\" : \"Dark\"}\n        </button>\n        <button\n          aria-label={`Increase font size (current: ${fontSizePct}%)`}\n          className=\"font-size-btn\"\n          tabIndex={0}\n          style={{ marginLeft: 8 }}\n          onClick={() => setFontSize(f => Math.min(f + 0.15, 1.7))}\n        >+</button>\n        <button\n          aria-label={`Decrease font size (current: ${fontSizePct}%)`}\n          className=\"font-size-btn\"\n          tabIndex={0}\n          style={{ marginLeft: 2 }}\n          onClick={() => setFontSize(f => Math.max(f - 0.15, 0.7))}\n        >-</button>\n        <button\n          className=\"restart-btn\"\n          tabIndex={0}\n          aria-label=\"Restart conversation\"\n          style={{ marginLeft: 16 }}\n          onClick={handleRestart}\n        >Restart</button>\n      </div>\n      <div className=\"chat-scrollbox gradient-bg\">\n        {messages.map((msg, i) => (\n          <div\n            key={i}\n            className={`bubble-row ${msg.from === \"user\" ? \"right\" : \"left\"}`}\n          >\n            <div className=\"bubble-grid\">\n              <img\n                src={msg.from === \"user\" ? userAvatar : botAvatar}\n                alt={msg.from === \"user\" ? \"User avatar\" : \"FinBot avatar\"}\n                className=\"bubble-avatar\"\n              />\n              <div\n                className={msg.from === \"user\" ? \"user-bubble bubble-animate\" : \"bot-bubble bubble-animate\"}\n                tabIndex={0}\n                role=\"status\"\n                aria-live=\"polite\"\n              >\n                <span style={{ flex: 1 }}>{msg.text}</span>\n              </div>\n            </div>\n          </div>\n        ))}\n        <div ref={chatEndRef} />\n      </div>\n\n      {/* === Stepper logic for wizard === */}\n      {(step === STEPS.NAME || step === STEPS.GOAL ||\n        (step >= STEPS.INCOME_START && step < STEPS.EXPENSE_START) ||\n        (step >= STEPS.EXPENSE_START && step < STEPS.QNA)) && (\n        <div className=\"input-row\">\n          <input\n            ref={inputRef}\n            type={step >= STEPS.INCOME_START && step < STEPS.QNA ? \"number\" : \"text\"}\n            value={input}\n            onChange={e => setInput(e.target.value)}\n            onKeyDown={e => e.key === \"Enter\" && handleBudgetStepper()}\n            aria-label=\"Your answer\"\n            style={{ flex: 1, minWidth: 0 }}\n            disabled={loading}\n            tabIndex={0}\n          />\n          <button\n            className=\"bubble-action-btn\"\n            onClick={handleBudgetStepper}\n            disabled={loading || !input.trim()}\n            aria-label=\"Send\"\n            tabIndex={0}\n          >\n            Send\n          </button>\n        </div>\n      )}\n\n      {/* === Q&A Step === */}\n      {step === STEPS.QNA && (\n  <div className=\"bot-bubble bubble-animate\">\n    <label htmlFor=\"qna-input\">Ask a question about your budget or money:</label>\n    <input\n      id=\"qna-input\"\n      type=\"text\"\n      ref={inputRef}\n      value={qaInput}\n      onChange={e => setQaInput(e.target.value)}\n      onKeyDown={e => e.key === \"Enter\" && askQuestion()}\n      aria-label=\"Your budgeting question\"\n      style={{ marginTop: 6, marginBottom: 10, width: \"100%\" }}\n      disabled={loading}\n    />\n    <div style={{ display: \"flex\", flexDirection: \"column\", gap: 8, marginTop: 8, width: \"100%\" }}>\n      <button\n        className=\"bubble-action-btn\"\n        style={{ width: \"100%\" }}\n        onClick={askQuestion}\n        disabled={loading || !qaInput.trim()}\n      >\n        {loading ? \"Thinking...\" : \"Ask\"}\n      </button>\n      <button\n        className=\"bubble-action-btn\"\n        style={{ width: \"100%\" }}\n        onClick={() => setStep(STEPS.DOWNLOAD)}\n      >\n        Download\n      </button>\n    </div>\n  </div>\n)}\n\n\n      {/* === Download Step === */}\n      {step === STEPS.DOWNLOAD && (\n        <div className=\"bot-bubble bubble-animate\">\n          <p>Download your budget template as a spreadsheet</p>\n          <button\n            className=\"bubble-action-btn\"\n            onClick={downloadSpreadsheet}\n            disabled={loading}\n          >\n            Download\n          </button>\n          {spreadsheetUrl && (\n            <a href={spreadsheetUrl} download=\"budget.xlsx\">Click here if your download does not start.</a>\n          )}\n        </div>\n      )}\n    </div>\n  ); \n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}